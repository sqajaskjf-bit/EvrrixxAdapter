<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evrrixx</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://kit.fontawesome.com/a2d9d5a64b.js" crossorigin="anonymous"></script>
</head>
<body>
  <div id="intro-screen">
    <h2>Click to continue</h2>
  </div>

  <div id="content" class="hidden">
    <div class="top-bar">
      <div class="view-switch">
        <span id="switch-pc">💻</span>
        <span id="switch-mobile">📱</span>
      </div>
      <div class="views"><i class="fa fa-eye"></i> <span id="viewCount">0</span></div>
    </div>

    <div class="card">
      <img class="avatar" src="https://avatars.mds.yandex.net/i?id=37e394a9871b342e37f3dca00c22c825e9bf71b8-5886795-images-thumbs&n=13" alt="avatar" />
      <h1 class="nick">Evrrixx</h1>
      <p class="osu-rank">🌍 World #1.1kk | 🇺🇦 Country #22k</p>
      <p class="desc">OSU player</p>
      <p class="geo">
        <a href="https://www.google.com/maps/place/Lviv" target="_blank" title="Open in Google Maps">📍 Lviv</a>
      </p>

      <div class="links">
        <a href="https://discord.com/users/1379041675070148670" target="_blank"><i class="fab fa-discord"></i></a>
        <a href="https://t.me/Evrrixx" target="_blank"><i class="fab fa-telegram"></i></a>
        <a href="https://www.tiktok.com/@svalipchik" target="_blank"><i class="fab fa-tiktok"></i></a>
        <a href="https://osu.ppy.sh/users/38462434" target="_blank"><i class="fas fa-circle"></i></a>
      </div>

      <div class="player">
        <img class="cover" src="https://images.genius.com/58bde3f707f18fb105b26ee786f24bad.1000x1000x1.png" alt="cover" />
        <audio id="audio" preload="auto">
          <source src="https://sefon.pro/api/mp3_download/direct/1362072/3vUCAL9SUTYUJlpqN96WmNiAVCIkVxwbfrpr1nc34l9vjo7WZbWMezr6WL9BMVq0tHqmbpdsiBmSi1pqocPzFN58ejf8EBJJwkPbEh3iQhHt9sLRFfef4pIcMNiie8U2AI0x7_Ei0ub0xroANdPEMrWr0xjdHUfGSpnN8EoQ/" type="audio/mpeg">
        </audio>
        <div class="controls">
          <button id="playPause"><i class="fa fa-play"></i></button>
          <input type="range" id="progress" value="0" max="100" />
          <span id="time">0:00 / 0:00</span>
          <input type="range" id="volume" min="0" max="1" step="0.01" value="0.5" />
          <button id="mute"><i class="fa fa-volume-up"></i></button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Intro screen ---
    const intro = document.getElementById('intro-screen');
    const content = document.getElementById('content');
    const audio = document.getElementById('audio');
    const playPause = document.getElementById('playPause');
    const progress = document.getElementById('progress');
    const timeDisplay = document.getElementById('time');
    const volume = document.getElementById('volume');
    const mute = document.getElementById('mute');
    let isPlaying = false;

    intro.addEventListener('click', () => {
      intro.style.opacity = '0';
      setTimeout(() => {
        intro.style.display = 'none';
        content.classList.remove('hidden');
        content.classList.add('fade-in');
        audio.play();
        isPlaying = true;
        playPause.innerHTML = '<i class="fa fa-pause"></i>';
      }, 600);
    });

    // --- Player controls ---
    playPause.addEventListener('click', () => {
      if (isPlaying) {
        audio.pause();
        playPause.innerHTML = '<i class="fa fa-play"></i>';
      } else {
        audio.play();
        playPause.innerHTML = '<i class="fa fa-pause"></i>';
      }
      isPlaying = !isPlaying;
    });

    audio.addEventListener('timeupdate', () => {
      progress.value = (audio.currentTime / audio.duration) * 100 || 0;
      const cur = Math.floor(audio.currentTime);
      const dur = Math.floor(audio.duration);
      const fmt = t => `${Math.floor(t/60)}:${('0'+t%60).slice(-2)}`;
      timeDisplay.textContent = `${fmt(cur)} / ${fmt(dur)}`;
    });

    progress.addEventListener('input', () => {
      audio.currentTime = (progress.value / 100) * audio.duration;
    });

    volume.addEventListener('input', () => {
      audio.volume = volume.value;
    });

    mute.addEventListener('click', () => {
      audio.muted = !audio.muted;
      mute.innerHTML = audio.muted ? '<i class="fa fa-volume-mute"></i>' : '<i class="fa fa-volume-up"></i>';
    });

    document.addEventListener('visibilitychange', () => {
      if (document.hidden && !audio.paused) audio.pause();
    });

    // --- View counter ---
    fetch('https://api.countapi.xyz/hit/evrrixx-site/views')
      .then(res => res.json())
      .then(data => document.getElementById('viewCount').textContent = data.value);

    // --- Device switch ---
    const pc = document.getElementById('switch-pc');
    const mobile = document.getElementById('switch-mobile');

    function setView(mode) {
      document.body.className = mode;
      localStorage.setItem('viewMode', mode);
    }

    pc.addEventListener('click', () => setView('pc'));
    mobile.addEventListener('click', () => setView('mobile'));
    const saved = localStorage.getItem('viewMode');
    if (saved) document.body.className = saved;
  </script>
</body>
</html>
