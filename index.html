<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Evrrixx ‚Äî profile</title>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Font Awesome (–∏–∫–æ–Ω–∫–∏ —Å–æ—Ü—Å–µ—Ç–µ–π, play/pause, mute) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="" crossorigin="anonymous" />
</head>
<body>
  <!-- üëÅÔ∏è Counter (–≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É) -->
  <div id="view-count" aria-hidden="true">üëÅÔ∏è <span id="views">0</span> views</div>

  <!-- Overlay ‚Äî –Ω—É–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ -->
  <div id="overlay" role="dialog" aria-modal="true">
    <div class="overlay-cta">Click to continue</div>
    <div class="overlay-hint">Press to show site and start audio</div>
  </div>

  <!-- ‚ùÑÔ∏è Snow container –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ JS -->

  <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
  <main class="card" id="card" role="main" aria-label="Evrrixx profile card">
    <aside class="left">
      <!-- –ê–≤–∞—Ç–∞—Ä (URL) -->
      <div class="avatar-wrap">
        <img id="avatar" class="avatar" src="https://avatars.mds.yandex.net/i?id=37e394a9871b342e37f3dca00c22c825e9bf71b8-5886795-images-thumbs&n=13" alt="Evrrixx avatar">
      </div>

      <div class="profile-meta">
        <div class="nick" id="nick">Evrrixx</div>
        <div class="sub meta">OSU player ‚Ä¢ Lviv</div>
      </div>

      <!-- —Å–æ—Ü–∫–Ω–æ–ø–∫–∏ -->
      <div class="neon-buttons" id="neonButtons" aria-label="social links">
        <a class="btn" href="https://discord.com/users/1379041675070148670" target="_blank" rel="noopener" title="Discord"><i class="fa-brands fa-discord"></i></a>
        <a class="btn" href="https://t.me/Evrrixx" target="_blank" rel="noopener" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
        <a class="btn" href="https://www.tiktok.com/@svalipchik" target="_blank" rel="noopener" title="TikTok"><i class="fa-brands fa-tiktok"></i></a>
        <a class="btn" href="https://osu.ppy.sh/users/38462434" target="_blank" rel="noopener" title="Osu!"><i class="fa-solid fa-circle"></i></a>
      </div>
    </aside>

    <section class="right">
      <header class="top-row">
        <div class="big-nick">
          <div class="nick-large" id="nickLarge">Evrrixx</div>
          <div class="small-meta">OSU player</div>
        </div>
        <!-- views small for accessibility (duplicate) -->
        <div class="views-inline" aria-hidden="true">üëÅÔ∏è <span id="views-inline">0</span></div>
      </header>

      <!-- Bio -->
      <p class="bio"><strong>–ì–µ–æ:</strong> Lviv</p>

      <!-- üîä Player -->
      <div class="player" id="player" role="region" aria-label="audio player">
        <!-- track cover -->
        <img id="trackCover" class="track-cover" src="https://images.genius.com/58bde3f707f18fb105b26ee786f24bad.1000x1000x1.png" alt="track cover">

        <!-- info, progress and controls -->
        <div class="player-body">
          <div class="track-info">
            <div class="track-title">baby cute ‚Äî —É–Ω–∏–≤–µ—Ä</div>
            <div class="track-sub">track</div>
          </div>

          <div class="progress-wrap" id="progressWrap" title="Click to seek">
            <div class="progress-bar" id="progressBar"></div>
          </div>

          <div class="player-controls">
            <button id="playBtn" class="control play" aria-label="Play / Pause"><i class="fa-solid fa-play"></i></button>

            <!-- current / total time -->
            <div class="time" aria-live="polite"><span id="currentTime">0:00</span> / <span id="totalTime">0:00</span></div>

            <!-- volume + mute -->
            <div class="vol-wrap">
              <button id="muteBtn" class="control mute" title="Mute / Unmute" aria-label="Mute"><i class="fa-solid fa-volume-high"></i></button>
              <input id="volume" class="volume-slider" type="range" min="0" max="1" step="0.01" value="0.8" aria-label="Volume">
            </div>
          </div>
        </div>
      </div>

      <footer class="card-footer">
        <div class="credit">–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ: guns.lol ‚Äî neon card</div>
        <div class="updated">last updated ‚Ä¢ now</div>
      </footer>
    </section>
  </main>

  <!-- üëá Audio element —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ JS (–¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è) -->
  <!-- Script logic -->
  <script>
  /* =============================
     CONFIG / RESOURCES (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏)
     ============================== */
  const MP3_URL = "https://sefon.pro/api/mp3_download/direct/1362072/3vUCAL9SUTYUJlpqN96WmNiAVCIkVxwbfrpr1nc34l9vjo7WZbWMezr6WL9BMVq0tHqmbpdsiBmSi1pqocPzFN58ejf8EBJJwkPbEh3iQhHt9sLRFfef4pIcMNiie8U2AI0x7_Ei0ub0xroANdPEMrWr0xjdHUfGSpnN8EoQ/";
  const COUNTAPI_NAMESPACE = "evrrixx-bio";
  const COUNTAPI_KEY = "views";

  /* =============================
     DOM refs
     ============================== */
  const overlay = document.getElementById('overlay');
  const card = document.getElementById('card');
  const neonButtons = document.getElementById('neonButtons');
  const playerEl = document.getElementById('player');
  const playBtn = document.getElementById('playBtn');
  const muteBtn = document.getElementById('muteBtn');
  const volumeSlider = document.getElementById('volume');
  const progressWrap = document.getElementById('progressWrap');
  const progressBar = document.getElementById('progressBar');
  const currentTime = document.getElementById('currentTime');
  const totalTime = document.getElementById('totalTime');
  const viewsEl = document.getElementById('views');
  const viewsInlineEl = document.getElementById('views-inline');
  const viewCountBox = document.getElementById('view-count');
  const nickEl = document.getElementById('nickLarge');
  const socials = neonButtons;
  const trackCover = document.getElementById('trackCover');

  /* =============================
     Create audio object (JS-controlled)
     ============================== */
  const audio = new Audio();
  audio.src = MP3_URL;
  audio.preload = "metadata";
  audio.crossOrigin = "anonymous";

  /* =============================
     Helper: format seconds -> M:SS
     ============================== */
  function fmtTime(t){
    if(!isFinite(t) || t <= 0) return "0:00";
    const m = Math.floor(t / 60);
    const s = Math.floor(t % 60).toString().padStart(2,'0');
    return `${m}:${s}`;
  }

  /* =============================
     COUNTAPI ‚Äî –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
     (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞—Ö–æ–¥–µ)
     ============================== */
  // GET https://api.countapi.xyz/hit/{namespace}/{key}
  fetch(`https://api.countapi.xyz/hit/${COUNTAPI_NAMESPACE}/${COUNTAPI_KEY}`)
    .then(r => r.json())
    .then(data => {
      // data.value ‚Äî —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
      const v = data && data.value ? data.value : 1;
      viewsEl.textContent = Number(v).toLocaleString();
      viewsInlineEl.textContent = Number(v).toLocaleString();
      // –ø–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç
      viewCountBox.classList.add('visible');
    })
    .catch(err => {
      // –ø—Ä–∏ –æ—à–∏–±–∫–µ - –ø–æ–∫–∞–∑–∞—Ç—å 1 –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
      viewsEl.textContent = '1';
      viewsInlineEl.textContent = '1';
      viewCountBox.classList.add('visible');
      console.warn('CountAPI error', err);
    });

  /* =============================
     Fade-in sequence after overlay click
     timings (in ms)
     ============================== */
  const TIMINGS = {
    nick: 300,
    buttons: 500,
    player: 800,
    viewCount: 1200
  };

  /* =============================
     Overlay click: show UI & start audio (gesture)
     ============================== */
  overlay.addEventListener('click', () => {
    // fade overlay
    overlay.style.opacity = '0';
    setTimeout(()=> overlay.remove(), 600);

    // reveal main card
    card.classList.add('visible');

    // sequential fade-ins
    setTimeout(()=> { nickEl.classList.add('visible'); }, TIMINGS.nick);
    setTimeout(()=> { socials.classList.add('visible'); }, TIMINGS.buttons);
    setTimeout(()=> { playerEl.classList.add('visible'); }, TIMINGS.player);
    setTimeout(()=> { viewCountBox.classList.add('visible'); }, TIMINGS.viewCount);

    // try to play (gesture now allowed)
    audio.volume = parseFloat(volumeSlider.value || 0.8);
    audio.play().then(()=>{
      // show play state
      playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
      playerEl.classList.add('playing');
      trackCover.classList.add('glow');
    }).catch(err => {
      // autoplay blocked ‚Äî UI still visible
      console.warn('Autoplay blocked or failed', err);
    });
  });

  /* =============================
     Play / Pause button
     ============================== */
  playBtn.addEventListener('click', () => {
    if(audio.paused){
      audio.play().then(()=>{
        playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
        playerEl.classList.add('playing');
        trackCover.classList.add('glow');
      }).catch(err => {
        alert('Playback blocked by browser. Click overlay first.');
      });
    } else {
      audio.pause();
      playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
      playerEl.classList.remove('playing');
      trackCover.classList.remove('glow');
    }
  });

  /* =============================
     Mute / Unmute
     ============================== */
  muteBtn.addEventListener('click', () => {
    audio.muted = !audio.muted;
    muteBtn.innerHTML = audio.muted ? '<i class="fa-solid fa-volume-xmark"></i>' : '<i class="fa-solid fa-volume-high"></i>';
    // reflect slider if muted / unmuted visually (we don't change slider value)
    volumeSlider.classList.toggle('muted', audio.muted);
  });

  /* =============================
     Volume slider
     ============================== */
  volumeSlider.addEventListener('input', (e) => {
    audio.volume = parseFloat(e.target.value);
    if(audio.muted && audio.volume > 0) {
      // if previously muted, unmute visually
      audio.muted = false;
      muteBtn.innerHTML = '<i class="fa-solid fa-volume-high"></i>';
      volumeSlider.classList.remove('muted');
    }
  });

  /* =============================
     Loaded metadata -> set total time
     ============================== */
  audio.addEventListener('loadedmetadata', () => {
    totalTime.textContent = fmtTime(audio.duration);
  });

  /* =============================
     Timeupdate -> update progress and current time
     ============================== */
  audio.addEventListener('timeupdate', () => {
    currentTime.textContent = fmtTime(audio.currentTime);
    const pct = (audio.currentTime / audio.duration) * 100 || 0;
    progressBar.style.width = pct + '%';
  });

  /* =============================
     Seek on progress click
     ============================== */
  progressWrap.addEventListener('click', (e) => {
    if(!audio.duration) return;
    const rect = progressWrap.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const p = Math.max(0, Math.min(1, x / rect.width));
    audio.currentTime = p * audio.duration;
  });

  /* =============================
     Autopause when tab hidden / resume optionally
     ============================== */
  document.addEventListener('visibilitychange', () => {
    if(document.hidden){
      // pause
      if(!audio.paused){
        audio.pause();
        playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
        playerEl.classList.remove('playing');
        trackCover.classList.remove('glow');
      }
    } else {
      // do not auto-resume automatically (respect user)
      // optional: resume if you want ‚Äî uncomment next lines:
      // audio.play(); playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
    }
  });

  /* =============================
     Snow: gentle falling ‚ùÑÔ∏è
     ============================== */
  (function makeSnow(){
    const spawnInterval = 220; // ms
    function spawn(){
      const s = document.createElement('div');
      s.className = 'snowflake';
      s.textContent = '‚ùÑ';
      s.style.left = (Math.random() * 100) + 'vw';
      s.style.fontSize = (8 + Math.random() * 18) + 'px';
      s.style.animationDuration = (8 + Math.random() * 10) + 's';
      s.style.opacity = (0.3 + Math.random() * 0.8);
      document.body.appendChild(s);
      setTimeout(()=> s.remove(), 12000);
    }
    setInterval(spawn, spawnInterval);
  })();

  /* =============================
     Small UX: keyboard Space toggles play/pause
     ============================== */
  document.addEventListener('keydown', (e) => {
    if(e.code === 'Space' && (document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA')){
      e.preventDefault();
      playBtn.click();
    }
  });

  /* =============================
     Accessibility: fallback avatar if image fails
     ============================== */
  const avatar = document.getElementById('avatar');
  avatar.addEventListener('error', () => {
    // fallback svg data URI
    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='300' height='300'><rect fill='#070618' width='100%' height='100%'/><circle cx='150' cy='100' r='70' fill='#7afcff'/><text x='50%' y='78%' font-size='36' font-family='Arial' fill='white' text-anchor='middle'>Evrrixx</text></svg>`;
    avatar.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
  });

  /* =============================
     End of script
     ============================== */
  </script>
</body>
</html>
