<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evrrixx — Profile</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Экран приветствия -->
  <div id="start-screen">
    <div class="start-overlay">
      <h1 class="start-text">Click to continue</h1>
    </div>
  </div>

  <!-- Снег -->
  <canvas id="snow"></canvas>

  <!-- Счётчик просмотров и переключатель -->
  <div class="top-bar">
    <div class="views">
      <svg class="eye" viewBox="0 0 24 24" fill="none"><path d="M2 12s4-8 10-8 10 8 10 8-4 8-10 8S2 12 2 12z" stroke="currentColor" stroke-width="1.2"/><circle cx="12" cy="12" r="3.2" stroke="currentColor" stroke-width="1.2"/></svg>
      <span id="viewCount">1</span>
    </div>
    <button id="modeToggle" class="mode-toggle" title="Switch mode">💻</button>
  </div>

  <!-- Основная карточка -->
  <div class="container hidden">
    <div class="profile-card">
      <div class="avatar-section">
        <img class="avatar" src="https://avatars.mds.yandex.net/i?id=37e394a9871b342e37f3dca00c22c825e9bf71b8-5886795-images-thumbs&n=13" alt="Evrrixx Avatar">
        <h1 class="nick">Evrrixx</h1>
        <p class="rank">🌍 #1.1kk • Country #22k</p>
        <p class="geo">
          <a href="https://www.google.com/maps/place/Lviv" target="_blank" class="geo-link">
            📍 Lviv
          </a>
        </p>
        <div class="links">
          <a class="btn" href="https://discord.com/users/1379041675070148670" target="_blank" title="Discord">💬</a>
          <a class="btn" href="https://t.me/Evrrixx" target="_blank" title="Telegram">📱</a>
          <a class="btn" href="https://www.tiktok.com/@svalipchik" target="_blank" title="TikTok">🎵</a>
          <a class="btn" href="https://osu.ppy.sh/users/38462434" target="_blank" title="Osu">⭕</a>
        </div>
      </div>

      <div class="music-player">
        <img class="cover" src="https://images.genius.com/58bde3f707f18fb105b26ee786f24bad.1000x1000x1.png" alt="Cover">
        <div class="controls">
          <h3>baby cute — универ</h3>
          <div class="progress-bar">
            <div class="bar" id="progress"></div>
          </div>
          <div class="control-buttons">
            <button id="playPause" class="play-btn">▶️</button>
            <span id="time">00:00 / 00:00</span>
            <input type="range" id="volume" min="0" max="1" step="0.01" value="0.6" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // === Музыка ===
    const audio = new Audio("https://sefon.pro/api/mp3_download/direct/1362072/3vUCAL9SUTYUJlpqN96WmNiAVCIkVxwbfrpr1nc34l9vjo7WZbWMezr6WL9BMVq0tHqmbpdsiBmSi1pqocPzFN58ejf8EBJJwkPbEh3iQhHt9sLRFfef4pIcMNiie8U2AI0x7_Ei0ub0xroANdPEMrWr0xjdHUfGSpnN8EoQ/");
    const playPause = document.getElementById("playPause");
    const progress = document.getElementById("progress");
    const time = document.getElementById("time");
    const volume = document.getElementById("volume");

    let playing = false;
    function formatTime(sec) {
      const m = Math.floor(sec / 60);
      const s = Math.floor(sec % 60);
      return `${m}:${s.toString().padStart(2, "0")}`;
    }

    playPause.addEventListener("click", () => {
      if (playing) {
        audio.pause();
        playPause.textContent = "▶️";
      } else {
        audio.play();
        playPause.textContent = "⏸️";
      }
      playing = !playing;
    });

    audio.addEventListener("timeupdate", () => {
      progress.style.width = (audio.currentTime / audio.duration) * 100 + "%";
      time.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
    });

    volume.addEventListener("input", () => {
      audio.volume = volume.value;
    });

    // === Автопауза при потере фокуса ===
    document.addEventListener("visibilitychange", () => {
      if (document.hidden && playing) {
        audio.pause();
        playPause.textContent = "▶️";
        playing = false;
      }
    });

    // === Кнопка "Click to continue" ===
    document.getElementById("start-screen").addEventListener("click", () => {
      document.getElementById("start-screen").classList.add("hide");
      document.querySelector(".container").classList.remove("hidden");
      audio.play().catch(() => console.log("Autoplay blocked"));
      playing = true;
      playPause.textContent = "⏸️";
    });

    // === Счётчик просмотров (localStorage) ===
    let views = localStorage.getItem("views_evrrixx") || 0;
    views++;
    localStorage.setItem("views_evrrixx", views);
    document.getElementById("viewCount").textContent = views;

    // === Переключение режима ===
    const toggle = document.getElementById("modeToggle");
    toggle.addEventListener("click", () => {
      document.body.classList.toggle("mobile");
      toggle.textContent = document.body.classList.contains("mobile") ? "📱" : "💻";
    });

    // === Снег ===
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");
    let w, h;
    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();
    const flakes = Array.from({length: 120}, () => ({
      x: Math.random() * w,
      y: Math.random() * h,
      r: Math.random() * 3 + 1,
      d: Math.random() + 1
    }));
    function drawSnow() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = "rgba(255,255,255,0.8)";
      ctx.beginPath();
      for (let f of flakes) ctx.moveTo(f.x, f.y), ctx.arc(f.x, f.y, f.r, 0, Math.PI*2, true);
      ctx.fill();
      updateSnow();
    }
    let angle = 0;
    function updateSnow() {
      angle += 0.001;
      for (let f of flakes) {
        f.y += Math.pow(f.d, 2) + 1;
        f.x += Math.sin(angle) * 2;
        if (f.y > h) { f.y = 0; f.x = Math.random() * w; }
      }
    }
    setInterval(drawSnow, 25);
  </script>
</body>
</html>
